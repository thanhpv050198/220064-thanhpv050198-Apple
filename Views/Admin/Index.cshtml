@model AppleStoreWeb.Models.WebsiteStats
@{
    ViewData["Title"] = "Apple Store - B·∫£ng ƒëi·ªÅu khi·ªÉn qu·∫£n tr·ªã";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1><i class="fab fa-apple me-2"></i>Apple Store - B·∫£ng ƒëi·ªÅu khi·ªÉn qu·∫£n tr·ªã</h1>
                <div class="text-muted">
                    <i class="fas fa-clock me-1"></i>C·∫≠p nh·∫≠t l√∫c: @DateTime.Now.ToString("dd/MM/yyyy HH:mm")
                </div>
            </div>

            <!-- Website Status Banner -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="alert alert-success border-left-success shadow" role="alert">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="d-flex align-items-center">
                                    <div class="me-3">
                                        <i class="fas fa-check-circle fa-2x text-success"></i>
                                    </div>
                                    <div>
                                        <h4 class="alert-heading mb-1">üçé Apple Store ƒëang ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng!</h4>
                                        <p class="mb-0">Website b√°n s·∫£n ph·∫©m c√¥ng ngh·ªá Apple ƒëang v·∫≠n h√†nh ·ªïn ƒë·ªãnh. T·∫•t c·∫£ d·ªãch v·ª• ƒëang ho·∫°t ƒë·ªông t·ªët.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="text-center">
                                    <div class="h5 text-success mb-0">
                                        <i class="fas fa-signal me-1"></i>99.9%
                                    </div>
                                    <small class="text-muted">Uptime</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                T·ªïng s·∫£n ph·∫©m
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">@Model.TotalProducts</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-box fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                T·ªïng ƒë∆°n h√†ng
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">@Model.TotalOrders</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-shopping-cart fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                T·ªïng kh√°ch h√†ng
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">@Model.TotalCustomers</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                T·ªïng doanh thu
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">@Model.TotalRevenue.ToString("N0") ‚Ç´</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Today's Statistics -->
    <div class="row mb-4">
        <div class="col-xl-3 col-lg-6">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">H√¥m nay</h6>
                </div>
                <div class="card-body">
                    <div class="text-center">
                        <div class="h4 text-primary">@Model.TodayOrders</div>
                        <div class="text-muted">ƒê∆°n h√†ng m·ªõi</div>
                        <hr>
                        <div class="h5 text-success">@Model.TodayRevenue.ToString("N0") ‚Ç´</div>
                        <div class="text-muted">Doanh thu</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-lg-6">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-success">Th√°ng n√†y</h6>
                </div>
                <div class="card-body">
                    <div class="text-center">
                        <div class="h4 text-success">@ViewBag.ThisMonthOrders</div>
                        <div class="text-muted">ƒê∆°n h√†ng</div>
                        <hr>
                        @{
                            var growth = ViewBag.LastMonthOrders > 0 ?
                                Math.Round(((decimal)ViewBag.ThisMonthOrders - ViewBag.LastMonthOrders) / ViewBag.LastMonthOrders * 100, 1) : 0;
                        }
                        <div class="h6 @(growth >= 0 ? "text-success" : "text-danger")">
                            <i class="fas fa-arrow-@(growth >= 0 ? "up" : "down")"></i> @Math.Abs(growth)%
                        </div>
                        <div class="text-muted">So v·ªõi th√°ng tr∆∞·ªõc</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-lg-6">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-info">ƒê∆°n h√†ng ƒëang x·ª≠ l√Ω</h6>
                </div>
                <div class="card-body">
                    <div class="text-center">
                        <div class="h4 text-warning">@ViewBag.PendingOrders</div>
                        <div class="text-muted">Ch·ªù x·ª≠ l√Ω</div>
                        <hr>
                        <div class="h5 text-info">@ViewBag.ShippingOrders</div>
                        <div class="text-muted">ƒêang giao h√†ng</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-lg-6">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-warning">Ho·∫°t ƒë·ªông</h6>
                </div>
                <div class="card-body">
                    <div class="text-center">
                        <div class="h4 text-info">@Model.OnlineUsers</div>
                        <div class="text-muted">Ng∆∞·ªùi d√πng online</div>
                        <hr>
                        <div class="h5 text-warning">@Model.ConversionRate%</div>
                        <div class="text-muted">T·ª∑ l·ªá chuy·ªÉn ƒë·ªïi</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activities and Top Products -->
    <div class="row mb-4">
        <div class="col-xl-8">
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">ƒê∆°n h√†ng g·∫ßn ƒë√¢y</h6>
                </div>
                <div class="card-body">
                    @if (ViewBag.RecentOrders != null && ((IEnumerable<dynamic>)ViewBag.RecentOrders).Any())
                    {
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>M√£ ƒë∆°n</th>
                                        <th>Kh√°ch h√†ng</th>
                                        <th>Th·ªùi gian</th>
                                        <th>T·ªïng ti·ªÅn</th>
                                        <th>Tr·∫°ng th√°i</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var order in (IEnumerable<dynamic>)ViewBag.RecentOrders)
                                    {
                                        <tr>
                                            <td><small>#@order.Id.Substring(0, 8)</small></td>
                                            <td>@order.UserName</td>
                                            <td><small>@order.CreatedAt.ToString("dd/MM HH:mm")</small></td>
                                            <td><strong>@order.Total.ToString("N0") ‚Ç´</strong></td>
                                            <td>
                                                @switch (order.Status)
                                                {
                                                    case "pending":
                                                        <span class="badge bg-warning text-dark">Ch·ªù x·ª≠ l√Ω</span>
                                                        break;
                                                    case "confirmed":
                                                        <span class="badge bg-info">ƒê√£ x√°c nh·∫≠n</span>
                                                        break;
                                                    case "shipping":
                                                        <span class="badge bg-primary">ƒêang giao</span>
                                                        break;
                                                    case "delivered":
                                                        <span class="badge bg-success">ƒê√£ giao</span>
                                                        break;
                                                    case "cancelled":
                                                        <span class="badge bg-danger">ƒê√£ h·ªßy</span>
                                                        break;
                                                }
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                    else
                    {
                        <div class="text-center py-3">
                            <i class="fas fa-shopping-cart fa-2x text-muted mb-2"></i>
                            <p class="text-muted">Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o</p>
                        </div>
                    }
                </div>
            </div>
        </div>

        <div class="col-xl-4">
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-success">S·∫£n ph·∫©m b√°n ch·∫°y</h6>
                </div>
                <div class="card-body">
                    @if (ViewBag.TopProducts != null && ((IEnumerable<dynamic>)ViewBag.TopProducts).Any())
                    {
                        @foreach (var product in (IEnumerable<dynamic>)ViewBag.TopProducts)
                        {
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <div class="fw-bold">@product.ProductName</div>
                                    <small class="text-muted">ƒê√£ b√°n: @product.TotalSold</small>
                                </div>
                                <div class="text-end">
                                    <div class="fw-bold text-success">@product.Revenue.ToString("N0") ‚Ç´</div>
                                </div>
                            </div>
                            <hr class="my-2">
                        }
                    }
                    else
                    {
                        <div class="text-center py-3">
                            <i class="fas fa-chart-line fa-2x text-muted mb-2"></i>
                            <p class="text-muted">Ch∆∞a c√≥ d·ªØ li·ªáu b√°n h√†ng</p>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Thao t√°c nhanh</h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <a href="@Url.Action("Products")" class="btn btn-primary btn-block">
                                <i class="fas fa-mobile-alt me-2"></i>Qu·∫£n l√Ω s·∫£n ph·∫©m Apple
                                <div class="small">@Model.TotalProducts s·∫£n ph·∫©m Apple</div>
                            </a>
                        </div>
                        <div class="col-md-3 mb-3">
                            <a href="@Url.Action("Orders")" class="btn btn-success btn-block">
                                <i class="fas fa-shopping-cart me-2"></i>Qu·∫£n l√Ω ƒë∆°n h√†ng
                                <div class="small">@ViewBag.PendingOrders ƒë∆°n ch·ªù x·ª≠ l√Ω</div>
                            </a>
                        </div>
                        <div class="col-md-3 mb-3">
                            <a href="@Url.Action("Customers")" class="btn btn-info btn-block">
                                <i class="fas fa-users me-2"></i>Qu·∫£n l√Ω kh√°ch h√†ng
                                <div class="small">@Model.TotalCustomers kh√°ch h√†ng</div>
                            </a>
                        </div>
                        <div class="col-md-3 mb-3">
                            <a href="@Url.Action("Index", "Home")" class="btn btn-outline-secondary btn-block">
                                <i class="fab fa-apple me-2"></i>Xem Apple Store
                                <div class="small">@ViewBag.LowStockProducts s·∫£n ph·∫©m s·∫Øp h·∫øt</div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.border-left-primary {
    border-left: 0.25rem solid #4e73df !important;
}

.border-left-success {
    border-left: 0.25rem solid #1cc88a !important;
}

.border-left-info {
    border-left: 0.25rem solid #36b9cc !important;
}

.border-left-warning {
    border-left: 0.25rem solid #f6c23e !important;
}

.text-gray-800 {
    color: #5a5c69 !important;
}

.text-gray-300 {
    color: #dddfeb !important;
}

.btn-block {
    width: 100%;
}
</style>
